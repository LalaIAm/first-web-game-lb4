{"ast":null,"code":"export const authenticationService = {\n  login,\n  signup,\n  logout,\n  getUserData,\n  getGearData\n};\n\nconst axios = require(\"axios\");\n\nfunction login(email, password, self) {\n  const data = {\n    email: email,\n    password: password\n  };\n  const header = {\n    \"Content-Type\": \"application/json\"\n  };\n  return axios.post(\"http://[::1]:3000/characters/login\", data, header).then(function (response) {\n    //console.log(response.data.token);\n    localStorage.setItem(\"currentUser\", response.data.token);\n    self.props.history.push(\"/\");\n    self.props.handleLogin();\n  }).catch(function (error) {\n    //console.log(\"error\");\n    if (!self.unmount) self.setState({\n      error\n    });\n  });\n}\n\nfunction signup(email, password, name) {\n  const header = {\n    \"Content-Type\": \"application/json\"\n  };\n  const data = {\n    email: email,\n    password: password,\n    name: name\n  };\n  return axios.post(\"http://[::1]:3000/characters\", data, header).then(function (response) {\n    console.log(response);\n  });\n}\n\nfunction getUserData(currentUser, self) {\n  axios.get(\"http://[::1]:3000/characters\", {\n    headers: {\n      Authorization: \"Bearer \".concat(currentUser)\n    }\n  }).then(function (response) {\n    //console.log(response.data);\n    self.setState({\n      data: response.data\n    });\n  }).catch(function (error) {\n    logout();\n  });\n}\n\nfunction getGearData(currentUser, self) {\n  axios.get(\"http://[::1]:3000/updatecharacter\", {\n    headers: {\n      Authorization: \"Bearer \".concat(currentUser)\n    }\n  }).then(function (response) {\n    //console.log(response.data);\n    self.setState({\n      gear: response.data\n    });\n  }).catch(function (error) {\n    logout();\n  });\n}\n\nfunction logout() {\n  localStorage.removeItem(\"currentUser\");\n}","map":{"version":3,"sources":["/Users/xiaocase/Documents/GitHub/first-web-game-lb4/firstgame-frontend/src/services/AuthServices.js"],"names":["authenticationService","login","signup","logout","getUserData","getGearData","axios","require","email","password","self","data","header","post","then","response","localStorage","setItem","token","props","history","push","handleLogin","catch","error","unmount","setState","name","console","log","currentUser","get","headers","Authorization","gear","removeItem"],"mappings":"AAAA,OAAO,MAAMA,qBAAqB,GAAG;AACnCC,EAAAA,KADmC;AAEnCC,EAAAA,MAFmC;AAGnCC,EAAAA,MAHmC;AAInCC,EAAAA,WAJmC;AAKnCC,EAAAA;AALmC,CAA9B;;AAQP,MAAMC,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AAEA,SAASN,KAAT,CAAeO,KAAf,EAAsBC,QAAtB,EAAgCC,IAAhC,EAAsC;AACpC,QAAMC,IAAI,GAAG;AACXH,IAAAA,KAAK,EAAEA,KADI;AAEXC,IAAAA,QAAQ,EAAEA;AAFC,GAAb;AAIA,QAAMG,MAAM,GAAG;AACb,oBAAgB;AADH,GAAf;AAGA,SAAON,KAAK,CACTO,IADI,CACC,oCADD,EACuCF,IADvC,EAC6CC,MAD7C,EAEJE,IAFI,CAEC,UAASC,QAAT,EAAmB;AACvB;AACAC,IAAAA,YAAY,CAACC,OAAb,CAAqB,aAArB,EAAoCF,QAAQ,CAACJ,IAAT,CAAcO,KAAlD;AACAR,IAAAA,IAAI,CAACS,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACAX,IAAAA,IAAI,CAACS,KAAL,CAAWG,WAAX;AACD,GAPI,EAQJC,KARI,CAQE,UAASC,KAAT,EAAgB;AACrB;AACA,QAAI,CAACd,IAAI,CAACe,OAAV,EAAmBf,IAAI,CAACgB,QAAL,CAAc;AAAEF,MAAAA;AAAF,KAAd;AACpB,GAXI,CAAP;AAYD;;AAED,SAAStB,MAAT,CAAgBM,KAAhB,EAAuBC,QAAvB,EAAiCkB,IAAjC,EAAuC;AACrC,QAAMf,MAAM,GAAG;AACb,oBAAgB;AADH,GAAf;AAGA,QAAMD,IAAI,GAAG;AACXH,IAAAA,KAAK,EAAEA,KADI;AAEXC,IAAAA,QAAQ,EAAEA,QAFC;AAGXkB,IAAAA,IAAI,EAAEA;AAHK,GAAb;AAKA,SAAOrB,KAAK,CACTO,IADI,CACC,8BADD,EACiCF,IADjC,EACuCC,MADvC,EAEJE,IAFI,CAEC,UAASC,QAAT,EAAmB;AACvBa,IAAAA,OAAO,CAACC,GAAR,CAAYd,QAAZ;AACD,GAJI,CAAP;AAKD;;AAED,SAASX,WAAT,CAAqB0B,WAArB,EAAkCpB,IAAlC,EAAwC;AACtCJ,EAAAA,KAAK,CACFyB,GADH,CACO,8BADP,EACuC;AACnCC,IAAAA,OAAO,EAAE;AAAEC,MAAAA,aAAa,mBAAYH,WAAZ;AAAf;AAD0B,GADvC,EAIGhB,IAJH,CAIQ,UAASC,QAAT,EAAmB;AACvB;AACAL,IAAAA,IAAI,CAACgB,QAAL,CAAc;AAAEf,MAAAA,IAAI,EAAEI,QAAQ,CAACJ;AAAjB,KAAd;AACD,GAPH,EAQGY,KARH,CAQS,UAASC,KAAT,EAAgB;AACrBrB,IAAAA,MAAM;AACP,GAVH;AAWD;;AAED,SAASE,WAAT,CAAqByB,WAArB,EAAkCpB,IAAlC,EAAwC;AACtCJ,EAAAA,KAAK,CACFyB,GADH,CACO,mCADP,EAC4C;AACxCC,IAAAA,OAAO,EAAE;AAAEC,MAAAA,aAAa,mBAAYH,WAAZ;AAAf;AAD+B,GAD5C,EAIGhB,IAJH,CAIQ,UAASC,QAAT,EAAmB;AACvB;AACAL,IAAAA,IAAI,CAACgB,QAAL,CAAc;AAAEQ,MAAAA,IAAI,EAAEnB,QAAQ,CAACJ;AAAjB,KAAd;AACD,GAPH,EAQGY,KARH,CAQS,UAASC,KAAT,EAAgB;AACrBrB,IAAAA,MAAM;AACP,GAVH;AAWD;;AAED,SAASA,MAAT,GAAkB;AAChBa,EAAAA,YAAY,CAACmB,UAAb,CAAwB,aAAxB;AACD","sourcesContent":["export const authenticationService = {\n  login,\n  signup,\n  logout,\n  getUserData,\n  getGearData\n};\n\nconst axios = require(\"axios\");\n\nfunction login(email, password, self) {\n  const data = {\n    email: email,\n    password: password\n  };\n  const header = {\n    \"Content-Type\": \"application/json\"\n  };\n  return axios\n    .post(\"http://[::1]:3000/characters/login\", data, header)\n    .then(function(response) {\n      //console.log(response.data.token);\n      localStorage.setItem(\"currentUser\", response.data.token);\n      self.props.history.push(\"/\");\n      self.props.handleLogin();\n    })\n    .catch(function(error) {\n      //console.log(\"error\");\n      if (!self.unmount) self.setState({ error });\n    });\n}\n\nfunction signup(email, password, name) {\n  const header = {\n    \"Content-Type\": \"application/json\"\n  };\n  const data = {\n    email: email,\n    password: password,\n    name: name\n  };\n  return axios\n    .post(\"http://[::1]:3000/characters\", data, header)\n    .then(function(response) {\n      console.log(response);\n    });\n}\n\nfunction getUserData(currentUser, self) {\n  axios\n    .get(\"http://[::1]:3000/characters\", {\n      headers: { Authorization: `Bearer ${currentUser}` }\n    })\n    .then(function(response) {\n      //console.log(response.data);\n      self.setState({ data: response.data });\n    })\n    .catch(function(error) {\n      logout();\n    });\n}\n\nfunction getGearData(currentUser, self) {\n  axios\n    .get(\"http://[::1]:3000/updatecharacter\", {\n      headers: { Authorization: `Bearer ${currentUser}` }\n    })\n    .then(function(response) {\n      //console.log(response.data);\n      self.setState({ gear: response.data });\n    })\n    .catch(function(error) {\n      logout();\n    });\n}\n\nfunction logout() {\n  localStorage.removeItem(\"currentUser\");\n}\n"]},"metadata":{},"sourceType":"module"}