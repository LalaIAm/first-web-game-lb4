{"ast":null,"code":"import { authenticationService } from \"./AuthServices\";\nimport { apiService } from \"./APIServices\";\nexport const userService = {\n  getUserData,\n  getGearData,\n  changeCharacterName,\n  initCharacter,\n  changeWeapon,\n  changeArmor,\n  changeSkill\n};\n\nconst axios = require(\"axios\");\n\nfunction getUserData(currentUser, self) {\n  axios.get(apiService.character, {\n    headers: {\n      Authorization: \"Bearer \".concat(currentUser)\n    }\n  }).then(function (response) {\n    //console.log(response.data);\n    self.setState({\n      data: response.data\n    });\n    self.props.history.push(\"/\");\n  }).catch(function (error) {\n    authenticationService.logout();\n  });\n}\n\nfunction getGearData(currentUser, self) {\n  axios.get(apiService.updatecharacter, {\n    headers: {\n      Authorization: \"Bearer \".concat(currentUser)\n    }\n  }).then(function (response) {\n    //console.log(response.data);\n    self.setState({\n      gear: response.data\n    });\n    self.props.history.push(\"/\");\n  }).catch(function () {\n    authenticationService.logout();\n  });\n}\n\nfunction changeCharacterName(currentUser, name, self, callback) {\n  const data = {\n    name: name\n  };\n  axios.patch(apiService.changename, data, {\n    headers: {\n      Authorization: \"Bearer \".concat(currentUser)\n    }\n  }).catch(function (error) {\n    if (error.response && error.response.data.error.statusCode === 401) authenticationService.logout();else if (!self.unmount) self.setState({\n      error\n    });\n  });\n  if (typeof callback === \"function\") callback();\n}\n\nfunction initCharacter(currentUser, name, gear, self, callback) {\n  const data = {\n    name: name,\n    gear\n  };\n  axios.patch(apiService.initCharacter, data, {\n    headers: {\n      Authorization: \"Bearer \".concat(currentUser)\n    }\n  }).catch(function (error) {\n    if (error.response && error.response.data.error.statusCode === 401) authenticationService.logout();else if (!self.unmount) self.setState({\n      error\n    });\n  });\n  if (typeof callback === \"function\") callback();\n}\n\nfunction changeWeapon(currentUser, gear, self, callback) {\n  axios.patch(apiService.updateweapon, gear.weapon, {\n    headers: {\n      Authorization: \"Bearer \".concat(currentUser)\n    }\n  }).catch(function (error) {\n    if (error.response && error.response.data.error.statusCode === 401) authenticationService.logout();else if (!self.unmount) self.setState({\n      error\n    });\n  });\n  if (typeof callback === \"function\") callback();\n}\n\nfunction changeArmor(currentUser, gear, self, callback) {\n  axios.patch(apiService.updatearmor, gear.armor, {\n    headers: {\n      Authorization: \"Bearer \".concat(currentUser)\n    }\n  }).catch(function (error) {\n    if (error.response && error.response.data.error.statusCode === 401) authenticationService.logout();else if (!self.unmount) self.setState({\n      error\n    });\n  });\n  if (typeof callback === \"function\") callback();\n}\n\nfunction changeSkill(currentUser, gear, self, callback) {\n  axios.patch(apiService.updateskill, gear.skill, {\n    headers: {\n      Authorization: \"Bearer \".concat(currentUser)\n    }\n  }).catch(function (error) {\n    if (error.response && error.response.data.error.statusCode === 401) authenticationService.logout();else if (!self.unmount) self.setState({\n      error\n    });\n  });\n  if (typeof callback === \"function\") callback();\n}","map":{"version":3,"sources":["/Users/xiaocase/Documents/GitHub/first-web-game-lb4/firstgame-frontend/src/services/UserServices.js"],"names":["authenticationService","apiService","userService","getUserData","getGearData","changeCharacterName","initCharacter","changeWeapon","changeArmor","changeSkill","axios","require","currentUser","self","get","character","headers","Authorization","then","response","setState","data","props","history","push","catch","error","logout","updatecharacter","gear","name","callback","patch","changename","statusCode","unmount","updateweapon","weapon","updatearmor","armor","updateskill","skill"],"mappings":"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","sourcesContent":["import { authenticationService } from \"./AuthServices\";\nimport { apiService } from \"./APIServices\";\n\nexport const userService = {\n  getUserData,\n  getGearData,\n  changeCharacterName,\n  initCharacter,\n  changeWeapon,\n  changeArmor,\n  changeSkill\n};\n\nconst axios = require(\"axios\");\n\nfunction getUserData(currentUser, self) {\n  axios\n    .get(apiService.character, {\n      headers: { Authorization: `Bearer ${currentUser}` }\n    })\n    .then(function(response) {\n      //console.log(response.data);\n      self.setState({ data: response.data });\n      self.props.history.push(\"/\");\n    })\n    .catch(function(error) {\n      authenticationService.logout();\n    });\n}\n\nfunction getGearData(currentUser, self) {\n  axios\n    .get(apiService.updatecharacter, {\n      headers: { Authorization: `Bearer ${currentUser}` }\n    })\n    .then(function(response) {\n      //console.log(response.data);\n      self.setState({ gear: response.data });\n      self.props.history.push(\"/\");\n    })\n    .catch(function() {\n      authenticationService.logout();\n    });\n}\n\nfunction changeCharacterName(currentUser, name, self, callback) {\n  const data = {\n    name: name\n  };\n  axios\n    .patch(apiService.changename, data, {\n      headers: { Authorization: `Bearer ${currentUser}` }\n    })\n    .catch(function(error) {\n      if (error.response && error.response.data.error.statusCode === 401)\n        authenticationService.logout();\n      else if (!self.unmount) self.setState({ error });\n    });\n  if (typeof callback === \"function\") callback();\n}\n\nfunction initCharacter(currentUser, name, gear, self, callback) {\n  const data = {\n    name: name,\n    gear\n  };\n  axios\n    .patch(apiService.initCharacter, data, {\n      headers: { Authorization: `Bearer ${currentUser}` }\n    })\n    .catch(function(error) {\n      if (error.response && error.response.data.error.statusCode === 401)\n        authenticationService.logout();\n      else if (!self.unmount) self.setState({ error });\n    });\n  if (typeof callback === \"function\") callback();\n}\n\nfunction changeWeapon(currentUser, gear, self, callback) {\n  axios\n    .patch(apiService.updateweapon, gear.weapon, {\n      headers: { Authorization: `Bearer ${currentUser}` }\n    })\n    .catch(function(error) {\n      if (error.response && error.response.data.error.statusCode === 401)\n        authenticationService.logout();\n      else if (!self.unmount) self.setState({ error });\n    });\n  if (typeof callback === \"function\") callback();\n}\n\nfunction changeArmor(currentUser, gear, self, callback) {\n  axios\n    .patch(apiService.updatearmor, gear.armor, {\n      headers: { Authorization: `Bearer ${currentUser}` }\n    })\n    .catch(function(error) {\n      if (error.response && error.response.data.error.statusCode === 401)\n        authenticationService.logout();\n      else if (!self.unmount) self.setState({ error });\n    });\n  if (typeof callback === \"function\") callback();\n}\n\nfunction changeSkill(currentUser, gear, self, callback) {\n  axios\n    .patch(apiService.updateskill, gear.skill, {\n      headers: { Authorization: `Bearer ${currentUser}` }\n    })\n    .catch(function(error) {\n      if (error.response && error.response.data.error.statusCode === 401)\n        authenticationService.logout();\n      else if (!self.unmount) self.setState({ error });\n    });\n  if (typeof callback === \"function\") callback();\n}\n"]},"metadata":{},"sourceType":"module"}